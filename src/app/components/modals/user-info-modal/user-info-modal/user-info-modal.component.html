<div class="modal modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="userModalLabel">Update your personal info</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      <form #userForm="ngForm" (ngSubmit)="onUserSubmit(userForm)">

        <label for="photo" class="form-label">Photo</label>
        <app-upload-progress
          accept="image/png,image/jpeg,image/jpg,image/svg"
          buttonText="Upload Photo"
          [fileCategory]="'coverImage'"
          (uploadStatusChanged)="handleUploadStatusChanged($event)"
          (fileUploaded)="handleFileUploaded($event)"
          (fileRemoved)="handleFileRemoved()">
        </app-upload-progress>

        <div class="mb-3">
          <label for="firstName" class="form-label">First Name</label>
          <input type="text" class="form-control" id="firstName" name="firstName" [(ngModel)]="formData.firstName"
                 #firstNameRef="ngModel" required>
          <div class="text-danger" *ngIf="firstNameRef.invalid && firstNameRef.touched">
            First name is required.
          </div>
        </div>

        <div class="mb-3">
          <label for="lastName" class="form-label">Last Name</label>
          <input type="text" class="form-control" id="lastName" name="lastName" [(ngModel)]="formData.lastName"
                 #lastNameRef="ngModel" required>
          <div class="text-danger" *ngIf="lastNameRef.invalid && lastNameRef.touched">
            Last name is required.
          </div>
        </div>

        <div class="mb-3">
          <label for="birthday" class="form-label">Birthday</label>
          <input type="date" class="form-control" id="birthday" name="birthday"
                 [(ngModel)]="formData.birthday" #birthdayRef="ngModel" required>
          <div class="text-danger" *ngIf="birthdayRef.invalid && birthdayRef.touched">
            Birthday is required.
          </div>
        </div>

        <div class="mb-3">
          <label for="profession" class="form-label">Profession</label>
          <input type="text" class="form-control" id="profession" name="profession"
                 [(ngModel)]="formData.profession" #professionRef="ngModel" required>
          <div class="text-danger" *ngIf="professionRef.invalid && professionRef.touched">
            Profession is required.
          </div>
        </div>

        <div *ngIf="countries.length > 0">
          <label for="country" class="form-label">Country</label>
          <select class="form-select" id="country" name="country" [(ngModel)]="formData.country"
                  #countryRef="ngModel" required>
            <option value="" disabled>Select a country</option>
            <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
          </select>
          <div class="text-danger" *ngIf="countryRef.invalid && countryRef.touched">
            Please select a country.
          </div>
        </div>

        <div *ngIf="countries.length === 0">
          <p>Loading countries...</p>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary" [disabled]="!userForm.valid">
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
